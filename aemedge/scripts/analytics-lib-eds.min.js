function isProduction(){return window.location.hostname.endsWith(".live")||window.location.hostname.includes("sling.com")}function analyticsLog(...e){isProduction()||console.log(...e)}function analyticsWarn(e){isProduction()||console.warn(`[Analytics Warning] ${e}`)}function analyticsError(e){isProduction()||console.error(`[Analytics Error] ${e}`)}function addTargetHider(){const e="sling-target-hider";if(!document.getElementById(e)){const a=document.createElement("style");a.id=e,a.innerHTML="body { opacity: 0 !important; }",document.head.appendChild(a)}}function removeTargetHider(){const e=document.getElementById("sling-target-hider");e&&e.remove()}function insertContent(e,a){const t=document.querySelector(e);t&&t.insertAdjacentHTML("beforeend",a)}function replaceContent(e,a){const t=document.querySelector(e);t&&(t.innerHTML=a)}function deleteContent(e){const a=document.querySelector(e);a&&a.remove()}function executeTargetTest(e){if(e&&e.selector)try{switch(e.action){case"insert":insertContent(e.selector,e.content);break;case"replace":replaceContent(e.selector,e.content);break;case"delete":deleteContent(e.selector);break;default:analyticsWarn(`Unknown target action: ${e.action}`)}}catch(e){analyticsError(`Target test execution failed: ${e.message}`)}}const classifications={arabic:"arabic",bangla:"bangla",bengali:"bengali",brazilian:"brazilian",cantonese:"cantonese",caribe:"caribe",centroamerica:"centroamerica",espana:"espana",french:"french",german:"german",greek:"greek",hindi:"hindi",internationalSports:"international-sports",italian:"italian",kannada:"kannada",latino:"latino",malayalam:"malayalam",mandarin:"mandarin",mexico:"mexico",marathi:"marathi",polish:"polish",punjabi:"punjabi",sudamerica:"sudamerica",taiwanese:"taiwanese",tamil:"tamil",telugu:"telugu",urdu:"urdu",us:"us",vietnamese:"vietnamese",worldCricket:"world-cricket"};function getPageData(){const{pathname:e}=window.location,a="/"===e,t={name:a?"home":e};if(a)t.type="home",t.lineOfBusiness="domestic",t.classification="us";else{const a=e.split("/")[1];a.includes("account")?t.type="account":a.includes("latino")?t.lineOfBusiness="latino":a.includes("whatson")?t.type="blog":a.includes("help")?t.type="help":a.includes("international")?t.lineOfBusiness="international":t.lineOfBusiness="domestic",t.classification=Object.values(classifications).find((a=>e.includes(a))),e.includes("cricket")&&!e.includes("world-cricket")&&(t.classification=classifications.worldCricket)}return t}class AnalyticsADL{constructor(e,a){this.appName=e,this.dataLayer=a,this.screenLoadCalled=!1;const t=this.dataLayer.push;this.dataLayer.push=(...e)=>(analyticsLog("[Analytics] Data layer push:",e[0]),t.apply(this.dataLayer,e))}updateDebugData(){this.dataLayer.push({web:{webPageDetails:{platform:"web",_sling:{appName:this.appName,analyticsVersion:"7.0.39"}}}})}updatePageData(e){const a=document.documentElement?.lang?.substr(0,2)||"en",t=window.location.search.slice(1),n=document.title,i="404"===n?n:void 0,s=e.lineOfBusiness||"unknown",o=e.classification||"us";this.dataLayer.push({web:{webPageDetails:{name:e.name||"unknown",type:e.type||"generic",qsp:t,language:a,siteSection:s,siteSubSection:o,siteSubSubSection:void 0,domain:e.domain||window.location.hostname,pageErrorName:i}}});const r=(new Date).toLocaleDateString("en-US",{weekday:"short"}).toLowerCase();this.dataLayer.push({web:{webPageDetails:{_sling:{pageViewDayOfWeek:r}}}})}updatePageAccessInfo(){analyticsLog(`[Analytics] updatePageAccessInfo called for ${this.appName}`)}updateUrlParamsData(e){const a={},t=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gclid","fbclid"];e.forEach(((e,n)=>{t.includes(n)&&(a[n]=e)})),this.dataLayer.push({web:{webPageDetails:{_sling:{urlParams:Object.keys(a).length>0?a:{}}}}})}updateUserData(e){e&&this.dataLayer.push({web:{user:e}})}updatePerformanceData(){if(window.performance&&window.performance.timing){const{timing:e}=window.performance;if(0===e.loadEventEnd||0===e.navigationStart)return void window.addEventListener("load",(()=>{this.updatePerformanceData()}),{once:!0});const a=e.loadEventEnd-e.navigationStart;let t="unknown";t=a<1e3?"<1sec":a<2e3?"1-2sec":a<3e3?"2-3sec":a<4e3?"3-4sec":a<5e3?"4-5sec":a<6e3?"5-6sec":a<7e3?"6-7sec":a<8e3?"7-8sec":a<9e3?"8-9sec":a<1e4?"9-10sec":">10sec",this.dataLayer.push({web:{webPageDetails:{loadTime:a,_sling:{loadTimeBucket:t}}}})}}screenLoad(e={}){if(window.slingScreenLoadCalled||this.screenLoadCalled)return analyticsLog("[Analytics] screenLoad already called globally, skipping duplicate call"),void analyticsLog("[Analytics] Call stack:",(new Error).stack);if(this.screenLoadCalled=!0,window.slingScreenLoadCalled=!0,analyticsLog("[Analytics] screenLoad method called with options:",e),analyticsLog("[Analytics] Call stack:",(new Error).stack),this.dataLayer.push({event:"screen_load",screenLoadFired:!0,web:{currentEvent:"screen_load"}}),e.name){const a=getPageData(),t=document.documentElement?.lang?.substr(0,2)||"en",n=window.location.search.slice(1);this.dataLayer.push({web:{webPageDetails:{name:e.name,type:e.type||a.type||"generic",qsp:n,language:t,siteSection:a.lineOfBusiness||"domestic",siteSubSection:a.classification||"us",domain:window.location.hostname,isErrorPage:!1}}})}this.dataLayer.push({useridentity:{authState:"logged_out",accountStatus:""}}),this.updatePerformanceData(),analyticsLog("[Analytics] screenLoad method completed successfully")}updateCartData(e){this.dataLayer.push({commerce:{cart:e}})}uiInteraction(e){this.dataLayer.push({event:"uiInteraction",eventInfo:e})}modalOpen(e){this.dataLayer.push({event:"modalOpen",eventInfo:e})}modalClose(){this.dataLayer.push({event:"modalClose"})}formStart(e){this.dataLayer.push({event:"formStart",eventInfo:e})}formComplete(e){this.dataLayer.push({event:"formComplete",eventInfo:e})}formError(e){this.dataLayer.push({event:"formError",eventInfo:e})}userLogin(e){this.dataLayer.push({event:"userLogin",user:e})}userLogout(){this.dataLayer.push({event:"userLogout"})}userRegister(e){this.dataLayer.push({event:"userRegister",user:e})}}let instance;function getInstance(e){if(analyticsLog("[Analytics] getInstance called with appName:",e),analyticsLog("[Analytics] Existing instance:",!!instance),!instance){analyticsLog("[Analytics] Creating new analytics instance"),window.adobeDataLayer=window.adobeDataLayer||[];const a={get:(e,a)=>e[a]?function(...t){try{return e[a](...t)}catch(e){analyticsError(e)}}:(analyticsError(`Property ${a} accessed, but does not exist. If this is a function call, it will silently fail as a no-op. This needs to be fixed in the calling code.`),function(){})};instance=new Proxy(new AnalyticsADL(e,window.adobeDataLayer),a),instance.updateDebugData();const t=getPageData();instance.updatePageData({name:"unknown",lineOfBusiness:t.lineOfBusiness||"unknown",classification:t.classification||"us",type:t.type||"generic",domain:window.location.hostname});const n=new URLSearchParams(window.location.search);if(instance.updateUrlParamsData(n),localStorage.getItem("adobeDataLayer.web.user"))try{instance.updateUserData(JSON.parse(localStorage.getItem("adobeDataLayer.web.user")))}catch(e){analyticsError(e)}const i={},s=localStorage.getItem("user_zip");s&&(i.zip=s,i.zipCode=s),i.authState="logged_out",i.accountStatus="";const o={},r=localStorage.getItem("fabrickID");r&&(o.fabrickID=r);const c=localStorage.getItem("segmentCode");c&&(o.segmentCode=c);const l=localStorage.getItem("neustarL0"),d=localStorage.getItem("neustarL1"),u=localStorage.getItem("neustarL2"),g=localStorage.getItem("neustarL3");l&&(o.level0=l),d&&(o.level1=d),u&&(o.level2=u),g&&(o.level3=g);const m=localStorage.getItem("neustarAud");if(m)try{const e=JSON.parse(m);Array.isArray(e)&&(o.audience=e)}catch(e){o.audience=[m]}o.audienceLists={dishActive:!1,dishFormer2022:!1,dishFormer2023:!1,dishFormer6mo:!1,slingActive:!1,slingFormer2023:!1,slingFormer6mo:!1}}return instance}window.slingUtils=window.slingUtils||{},window.slingUtils.lazy=window.slingUtils.lazy||{},window.slingUtils.lazy.registerComponent=window.slingUtils.lazy.registerComponent||function(){},window.adobeDataLayer&&!window.adobeDataLayer.getState&&(window.adobeDataLayer.getState=function(e){return e?void 0:{}},window.adobeDataLayer.addEventListener=function(e){analyticsLog("addEventListener called:",e)},window.adobeDataLayer.removeEventListener=function(e){analyticsLog("removeEventListener called:",e)}),window.addTargetHider=addTargetHider,window.removeTargetHider=removeTargetHider,window.executeTargetTest=executeTargetTest;const analytics={getInstance:getInstance,addTargetHider:addTargetHider,removeTargetHider:removeTargetHider,executeTargetTest:executeTargetTest,insertContent:insertContent,replaceContent:replaceContent,deleteContent:deleteContent};"undefined"!=typeof module&&module.exports&&(module.exports=analytics),window.analytics=analytics;