!function(){if(window.adobeDataLayer&&window.adobeDataLayer.version)return void console.warn("Adobe Client Data Layer already loaded");async function e(e=1e3,a=100,t=!0){const n=()=>{if(window.adobeDataLayer&&Array.isArray(window.adobeDataLayer)){let e=!1;return window.adobeDataLayer.forEach((a=>{if(a?.web?.webPageDetails){const t=a.web.webPageDetails._sling;if(t?.appName){const a=t.appName;a.includes("eds")||(t.appName=`eds-${a}`,e=!0,console.log(`[DataLayer] Updated appName: "${a}" â†’ "${t.appName}"`))}}})),{found:!0,updated:e}}return{found:!1,updated:!1}},s=()=>{if(window.adobeDataLayer){const e="_edsListenerSetup";window.adobeDataLayer[e]||(window.adobeDataLayer[e]=!0,window.adobeDataLayer.addEventListener("adobeDataLayer:change",(()=>{setTimeout((()=>{n()}),50)})),setInterval((()=>{n()}),5e3),console.log("[DataLayer] Listener established for ongoing appName updates"))}},o=n();return o.found?(t&&s(),o.updated):new Promise((o=>{const i=Date.now(),r=setInterval((()=>{const a=n();if(a.found)return clearInterval(r),t&&s(),void o(a.updated);Date.now()-i>=e&&(clearInterval(r),console.warn("[DataLayer] AppName update timed out after",e,"ms"),o(!1))}),a)}))}function a(e){const a=e?.dataLayer||[];a.version="2.0.2",a.getState=function(e){const a=this._state||{};return e?a[e]:{...a}},a.addEventListener=function(e,a,t){this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],this._listeners[e].push({handler:a,options:t})};const t=a.push;return a.push=function(e){return this._state=this._state||{},e&&"object"==typeof e&&!e.event&&Object.assign(this._state,e),t.call(this,e)},a}window.adobeDataLayer=window.adobeDataLayer||[];const t={pushDebugData(e){const a={web:{webPageDetails:{platform:"web",_sling:{appName:e,analyticsVersion:"1.0.0-datalayer-utils"}}}};window.adobeDataLayer.push(a)},pushPageData(e={}){const{name:a=window.location.pathname,lineOfBusiness:t="domestic",classification:n="us",type:s="generic",lang:o="en",domain:i=window.location.hostname}=e,r={web:{webPageDetails:{name:a,type:s,language:o,_sling:{lineOfBusiness:t,classification:n,domain:i}}}};window.adobeDataLayer.push(r)},pushScreenLoad(e={}){this.pushPageData(e);window.adobeDataLayer.push({event:"screen_load",screenLoadFired:!0,web:{currentEvent:"screen_load"}})},pushStepEvent(e,a={}){const t={cancelStart:"cancel_start",screenLoad:"screen_load"};if(!t[e])return void console.warn(`[DataLayer] Event "${e}" is not a valid event`);this.pushPageData(a);const n=t[e],s={event:n,web:{currentEvent:n}};window.adobeDataLayer.push(s)},getPageData(){const{pathname:e}=window.location,a="/"===e,t={name:a?"home":e};if(a)t.type="home",t.lineOfBusiness="domestic",t.classification="us";else{const a=e.split("/")[1];a.includes("account")?t.type="account":a.includes("latino")?t.lineOfBusiness="latino":a.includes("whatson")?t.type="blog":a.includes("help")?t.type="help":a.includes("international")?t.lineOfBusiness="international":t.lineOfBusiness="domestic",t.classification="us"}return t}};a({dataLayer:window.adobeDataLayer}),setTimeout((async()=>{const a=t.getPageData(),n=!!document.querySelector(".skipAnalytics"),s=document.querySelector('meta[name="cancel-step"]')?.content||"screen_load";t.pushDebugData("eds-marketing-site");try{await e()}catch(e){console.warn("[DataLayer] Failed to update appName:",e)}n||("screen_load"!==s?(console.log("[DataLayer] STEP EVENT"),t.pushStepEvent(s,a)):(console.log("[DataLayer] SCREEN LOAD EVENT"),t.pushScreenLoad(a)))}),0),window.SlingDataLayer={updateAppName:e,helpers:t,initialize:a}}();